<?xml version="1.0" encoding="ISO-8859-1"?>
<!--Edited using Gateway Setup Editor version RA5.1.0-200306 at 2020-03-30 18:56:37 by lbalakrishnan on ITRSLP156-->
<!-- Gateway-created setup include file for user ActiveConsole1 at 127.0.0.1 -->
<gateway compatibility="1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://schema.itrsgroup.com/RA5.1.0-200324/gateway.xsd">
	<dynamicEntities>
		<mappings>
			<mapping name="DefaultAppMapping">
				<!--An example Dynamic Entities mapping to automatically create Geneos data structures for data received from Collection Agent statsd plugin.
This mapping will also create an entity for Collection Agent self-monitoring metrics which are also published via its statsd plugin.
Use this as an example to create your own mappings for monitoring your instrumented applications.-->
				<matchCriteria>
					<matchCriterion>
						<source>
							<dimension>app_name</dimension>
						</source>
						<pattern>.+</pattern>
					</matchCriterion>
				</matchCriteria>
				<entityMapping>
					<directoryMapping>
						<dimension>hostname</dimension>
					</directoryMapping>
					<directoryMapping>
						<dimension>app_name</dimension>
					</directoryMapping>
				</entityMapping>
				<samplerMapping>
					<directoryMapping>
						<dimension>built-sampler</dimension>
					</directoryMapping>
				</samplerMapping>
				<dataviewMapping>
					<directoryMapping>
						<dimension>built-dv</dimension>
					</directoryMapping>
				</dataviewMapping>
				<rowMapping>
					<directoryMapping>
						<dimension>jvm_memory_pool_name</dimension>
					</directoryMapping>
					<directoryMapping>
						<dimension>jvm_memory_gc_name</dimension>
					</directoryMapping>
					<directoryMapping>
						<dimension>thread_state</dimension>
					</directoryMapping>
					<directoryMapping>
						<static>
							<data>data</data>
						</static>
					</directoryMapping>
				</rowMapping>
				<attributeMappings>
					<attributeMapping>
						<name>Application</name>
						<directoryMappings>
							<directoryMapping>
								<label>app_name</label>
							</directoryMapping>
						</directoryMappings>
					</attributeMapping>
					<attributeMapping>
						<name>Environment</name>
						<directoryMappings>
							<directoryMapping>
								<static>
									<var ref="probeHost"/>
								</static>
							</directoryMapping>
						</directoryMappings>
					</attributeMapping>
				</attributeMappings>
				<labelBuilders>
					<choice>
						<name>built-dv</name>
						<source>
							<metricName/>
						</source>
						<choices>
							<choice>
								<prefix>collection_agent</prefix>
								<value>collection_agent</value>
							</choice>
							<choice>
								<prefix>collection_agent_events</prefix>
								<value>events</value>
							</choice>
							<choice>
								<prefix>collection_agent_logs</prefix>
								<value>logs</value>
							</choice>
							<choice>
								<prefix>collection_agent_metrics</prefix>
								<value>metrics</value>
							</choice>
							<choice>
								<prefix>jvm_memory_gc</prefix>
								<value>memory_gc</value>
							</choice>
							<choice>
								<prefix>jvm_memory_pool_heap</prefix>
								<value>memory_pool_heap</value>
							</choice>
							<choice>
								<prefix>jvm_memory_pool_non_heap</prefix>
								<value>memory_pool_non_heap</value>
							</choice>
							<choice>
								<prefix>jvm_memory_heap</prefix>
								<value>memory_heap</value>
							</choice>
							<choice>
								<prefix>jvm_memory_non_heap</prefix>
								<value>memory_non_heap</value>
							</choice>
							<choice>
								<prefix>jvm_os</prefix>
								<value>os</value>
							</choice>
							<choice>
								<prefix>jvm_runtime</prefix>
								<value>runtime</value>
							</choice>
							<choice>
								<prefix>jvm_thread_states</prefix>
								<value>thread_states</value>
							</choice>
							<choice>
								<prefix>jvm_thread</prefix>
								<value>thread</value>
							</choice>
						</choices>
						<dimension>true</dimension>
						<fallback>Custom</fallback>
					</choice>
					<choice>
						<name>built-sampler</name>
						<source>
							<metricName/>
						</source>
						<choices>
							<choice>
								<prefix>collection</prefix>
								<value>Geneos</value>
							</choice>
							<choice>
								<prefix>jvm</prefix>
								<value>JVM</value>
							</choice>
						</choices>
						<dimension>true</dimension>
						<fallback>App</fallback>
					</choice>
				</labelBuilders>
			</mapping>
		</mappings>
		<mappingTypes>
			<mappingType name="DefaultAppMappingType">
				<!--An example Dynamic Entities mapping type.
A Dynamic Entities mapping type should be set in the Probe configuration.-->
				<mappings>
					<mapping ref="DefaultAppMapping"/>
				</mappings>
			</mappingType>
		</mappingTypes>
	</dynamicEntities>
	<types>
		<type name="Health">
			<sampler ref="Health"/>
		</type>
	</types>
	<samplers>
		<samplerGroup name="Dynamic Entities">
			<sampler name="Health">
				<sampleInterval>
					<data>1</data>
				</sampleInterval>
				<plugin>
					<dynamic-entities-health/>
				</plugin>
			</sampler>
		</samplerGroup>
	</samplers>
	<rules>
		<rule name="Sampling Status">
			<targets>
				<target>/geneos/gateway/directory/probe/managedEntity/sampler/dataview/headlines/cell[(@name=&quot;samplingStatus&quot;)]</target>
			</targets>
			<priority>1</priority>
			<block>
				<if>
					<like>
						<dataItem>
							<property>@value</property>
						</dataItem>
						<string>OK</string>
					</like>
					<transaction>
						<update>
							<property>state/@severity</property>
							<severity>ok</severity>
						</update>
					</transaction>
					<transaction>
						<update>
							<property>state/@severity</property>
							<severity>warning</severity>
						</update>
					</transaction>
				</if>
			</block>
		</rule>
	</rules>
	<operatingEnvironment>
		<gatewayName/>
		<var name="probeHost">
			<macro>
				<netprobeHost/>
			</macro>
		</var>
	</operatingEnvironment>
</gateway>